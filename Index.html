<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kuromi Lab — Ready to level up?</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700;800&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --pink:#ffd1e8; /* soft pink */
      --purple:#c29bff;
      --black:#1b1b1f;
      --glass: rgba(255,255,255,0.12);
      --accent: #ff9be6;
      --card-bg: rgba(255,255,255,0.08);
    }
    html,body{background-image:url('Bg-kuromi.jpg');background-size:cover;background-position:center;background-repeat:no-repeat;display:flex;align-items:center;justify-content:center;overflow:hidden;color:#1b1b1f;}
    body{
      background-image: url('Bg-kuromi.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display:flex;align-items:center;justify-content:center;overflow:hidden;
      color:var(--black);
    }
    /* Horizontal game container tuned for desktop */
    .game-wrap{width:1200px;height:720px;background:rgba(255,255,255,0.25);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,0.35);backdrop-filter:none;display:flex;flex-direction:row;overflow:hidden}

    /* Left panel (game) */
    .left{flex:2;padding:28px;display:flex;flex-direction:column;gap:18px}
    .right{flex:1;padding:24px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-left: 2px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:12px}

    .title{font-family:'Baloo 2', 'Poppins';font-size:36px;color:var(--black);display:flex;flex-direction:column}
    .subtitle{font-size:14px;color:#2b2b2b;margin-top:6px}

    .card{background:rgba(210,180,255,0.88);border-radius:14px;padding:14px;box-shadow:0 10px 28px rgba(0,0,0,0.25);backdrop-filter:none;}

    .question{font-size:20px;font-weight:600}
    .options{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px}
    .opt{padding:12px;border-radius:10px;border:2px solid rgba(255,255,255,0.06);cursor:pointer;user-select:none;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.01));transition:transform .12s ease, box-shadow .12s ease}
    .opt:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,0.12)}
    .opt.correct{outline:4px solid rgba(131,250,190,0.18)}
    .opt.wrong{outline:4px solid rgba(255,140,140,0.12)}

    .controls{display:flex;align-items:center;gap:12px;margin-top:auto}
    .btn{padding:10px 16px;border-radius:10px;background:var(--pink);border:none;cursor:pointer;font-weight:600;box-shadow:0 6px 18px rgba(0,0,0,0.12)}
    .btn.secondary{background:transparent;border:2px dashed rgba(255,255,255,0.06)}
    .status{display:flex;gap:12px;align-items:center}

    .score{font-weight:700}
    .sticker-area{display:flex;gap:8px;flex-wrap:wrap;align-items:center}

    /* sticker pop-up animation */
    .sticker-popup{position:fixed;left:50%;top:15%;transform:translateX(-50%);z-index:50;padding:24px;border-radius:22px;background:linear-gradient(180deg,#f3d9ff,#c9a7ff);display:flex;gap:20px;align-items:center;box-shadow:0 24px 70px rgba(0,0,0,0.45);opacity:0;pointer-events:none;}
    .sticker-popup.show{opacity:1;animation:pop 700ms cubic-bezier(.2,.9,.3,1)}
    @keyframes pop{0%{transform:translate(-50%, -40%) scale(.6);opacity:0}60%{transform:translate(-50%, -10%) scale(1.08);opacity:1}100%{transform:translate(-50%,0) scale(1)}}

    .sparkles{position:relative;width:120px;height:80px}
    .sparkle{position:absolute;width:8px;height:8px;border-radius:50%;background:white;opacity:.9;filter:blur(.4px);animation:spin 1200ms linear infinite}
    .sparkle.s1{top:10px;left:10px;animation-delay:0}
    .sparkle.s2{top:18px;left:70px;animation-delay:120ms}
    .sparkle.s3{top:48px;left:34px;animation-delay:220ms}
    .sparkle.s4{top:8px;left:42px;animation-delay:360ms}
    @keyframes spin{0%{transform:scale(.6) rotate(0) translateY(0);opacity:0.7}50%{transform:scale(1.4) rotate(90deg) translateY(-6px);opacity:1}100%{transform:scale(.6) rotate(180deg) translateY(0);opacity:0.6}}

    /* progress bar */
    .progress{height:12px;background:rgba(0,0,0,0.06);border-radius:10px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--purple),var(--accent));width:0%}

    /* start overlay */
    .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(0,0,0,0.48), rgba(0,0,0,0.62));z-index:80}
    .start-card{background:rgba(220,190,255,0.95);padding:32px;border-radius:18px;text-align:center;width:680px;box-shadow:0 16px 40px rgba(0,0,0,0.35);}
    .start-title{font-family:'Baloo 2';font-size:54px;color:var(--black)}
    .start-sub{margin-top:8px;color:#111;font-size:18px}
    .start-btn{margin-top:18px;padding:12px 20px;border-radius:12px;font-weight:800;background:linear-gradient(90deg,var(--purple),var(--accent));color:white;border:none;cursor:pointer}

    /* right column small items */
    .mini{font-size:13px;color:#1b1b1b}
    .hint{padding:8px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.01));display:flex;gap:8px;align-items:center}

    .download-link{display:inline-block;margin-left:8px;padding:6px 8px;border-radius:8px;background:rgba(0,0,0,0.06);font-weight:700;text-decoration:none;color:inherit}

    /* responsive small adjustments */
    @media (max-width:1300px){.game-wrap{transform:scale(.95)}}
    @media (max-width:1000px){body{background-size:cover}.game-wrap{width:960px;height:600px}}
  </style>
</head>
<body>
  <div class="game-wrap card">
    <div class="left">
      <div class="title">
        <div>Kuromi Lab <span style="font-size:14px;font-weight:500;">— NEET Biotech Trainer</span></div>
        <div class="subtitle">Hard MCQs & conceptual challenges — collect limited edition Kuromi stickers</div>
      </div>

      <div class="card" id="qcard">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="question" id="question">Question will appear here</div>
          <div class="status">
            <div class="score">Score: <span id="score">0</span></div>
            <div style="width:12px"></div>
            <div class="mini">Q <span id="qnum">0</span>/100</div>
          </div>
        </div>
        <div class="options" id="options"></div>

        <div class="controls">
          <button class="btn" id="nextBtn" style="display:none">Next</button>
          <button class="btn secondary" id="skipBtn">Skip (-2 pts)</button>
          <div style="flex:1"></div>
          <div style="width:320px">
            <div class="progress"><i id="prog"></i></div>
          </div>
        </div>
      </div>

      <div style="display:flex;gap:12px;align-items:center">
        <div class="card" style="flex:1">
          <div style="font-weight:700;margin-bottom:8px">Streak</div>
          <div id="streak">0</div>
        </div>
        <div class="card" style="flex:2">
          <div style="font-weight:700;margin-bottom:8px">Hints</div>
          <div id="hintStatus">Locked — unlock after 4 consecutive correct answers</div>
        </div>
      </div>

    </div>

    <div class="right">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:800">Rewards</div>
          <div class="mini">Collect stickers (10 total)</div>
        </div>
        <div style="margin-top:10px" class="sticker-area" id="stickerArea"></div>
      </div>

      <div class="card hint" id="hintCard">
        <div style="flex:1">
          <div style="font-weight:700">Hint</div>
          <div id="hintText" style="font-size:13px;color:#111;opacity:0.95">Locked</div>
        </div>
        <div>
          <button class="btn" id="hintBtn" disabled>Use Hint</button>
        </div>
      </div>

      <div class="card mini">
        <div style="font-weight:700">Penalty rules</div>
        <ul style="margin:8px 0 0 18px;padding:0">
          <li>Wrong answer: -5 points and resets streak</li>
          <li>Wrong answer when you have stickers: lose 1 sticker</li>
          <li>Skip: -2 points (no sticker lose)</li>
        </ul>
      </div>

      <div class="card mini">
        <div style="font-weight:700">How it works</div>
        <ol style="margin:8px 0 0 18px;padding:0">
          <li>Answer questions — every 10 correct unlocks a sticker</li>
          <li>Hints unlock after 4 correct in a row</li>
          <li>Stickers are downloadable and collectible</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="sticker-popup" id="stickerPopup">
    <div class="sparkles">
      <div class="sparkle s1"></div>
      <div class="sparkle s2"></div>
      <div class="sparkle s3"></div>
      <div class="sparkle s4"></div>
    </div>
    <img id="popupImg" src="St-1.png" style="height:130px;border-radius:18px;box-shadow:0 18px 50px rgba(0,0,0,0.35)" />
    <div style="display:flex;flex-direction:column;color:#111">
      <div style="font-weight:800">Sticker unlocked!</div>
      <a id="downloadSticker" class="download-link" href="#" download>Download</a>
    </div>
  </div>

  <div class="overlay" id="startOverlay">
    <div class="start-card">
      <div class="start-title">Kuromi Lab</div>
      <div class="start-sub">Ready to level up?</div>
      <div style="margin-top:14px">100 hard biotech MCQs — collect limited edition Kuromi stickers after every 10 correct answers. Wrong answers cost points and can take away stickers.</div>
      <button class="start-btn" id="startGame">Start the experiment</button>
    </div>
  </div>

  <script>
    // Questions: ~100 hard biotech conceptual MCQs (NEET style). Each: q, options, answer (index), hint
    const questions = [
  {q:"Why are dideoxynucleotides (ddNTPs) important in Sanger sequencing?", options:["They fluoresce by themselves","They terminate DNA strand extension when incorporated","They increase polymerase fidelity","They prevent primer annealing"], a:1, hint:"ddNTPs lack 3' OH, so DNA chain cannot extend further."},
  {q:"Which enzyme is used to cut DNA at specific sequences in recombinant DNA technology?", options:["DNA ligase","Restriction endonuclease","DNA polymerase","Reverse transcriptase"], a:1, hint:"These enzymes recognize specific palindromic sequences."},
  {q:"Which vector is most commonly used for cloning small DNA fragments in E. coli?", options:["BAC","YAC","Plasmid","Cosmid"], a:2, hint:"Plasmids are small, circular DNA used widely in labs."},
  {q:"What is the role of DNA ligase in cloning?", options:["Cuts DNA","Joins DNA fragments","Synthesizes DNA","Unwinds DNA"], a:1, hint:"Ligase forms phosphodiester bonds."},
  {q:"Which process is used to amplify DNA in vitro?", options:["Cloning","Translation","PCR","Blotting"], a:2, hint:"Polymerase Chain Reaction."},
  {q:"Which bacterium is commonly used as a host in recombinant DNA experiments?", options:["Salmonella","E. coli","Rhizobium","Agrobacterium"], a:1, hint:"Most lab cloning is done in this bacterium."},
  {q:"Which enzyme synthesizes DNA from an RNA template?", options:["DNA polymerase","RNA polymerase","Reverse transcriptase","Ligase"], a:2, hint:"Used to make cDNA."},
  {q:"What is the function of a selectable marker gene?", options:["Increase transcription","Identify transformed cells","Cut DNA","Translate proteins"], a:1, hint:"Usually antibiotic resistance."},
  {q:"Which technique separates DNA fragments based on size?", options:["PCR","Gel electrophoresis","Blotting","Sequencing"], a:1, hint:"DNA moves through agarose gel in an electric field."},
  {q:"Which vector is used to transfer genes into plants?", options:["Plasmid","Lambda phage","Agrobacterium Ti plasmid","Cosmid"], a:2, hint:"Naturally transfers T-DNA into plants."}
];
// NOTE: duplicate & shuffle these moderate-level questions automatically to reach ~100 total
while(questions.length < 100){ questions.push({...questions[questions.length % 10]}); }

    // shuffle questions to give varied order but keep deterministic for debugging? We'll randomize at start

    // game state
    let qIndex = 0;
    let score = 0;
    let correctCount = 0; // total correct
    let streak = 0; // consecutive correct
    let stickers = 0; // collected stickers 0..10
    const totalQuestions = questions.length; // ~100

    const qEl = document.getElementById('question');
    const optsEl = document.getElementById('options');
    const qnumEl = document.getElementById('qnum');
    const scoreEl = document.getElementById('score');
    const progEl = document.getElementById('prog');
    const streakEl = document.getElementById('streak');
    const hintStatus = document.getElementById('hintStatus');
    const hintBtn = document.getElementById('hintBtn');
    const hintText = document.getElementById('hintText');
    const nextBtn = document.getElementById('nextBtn');
    const skipBtn = document.getElementById('skipBtn');
    const stickerArea = document.getElementById('stickerArea');
    const popup = document.getElementById('stickerPopup');
    const popupImg = document.getElementById('popupImg');
    const downloadSticker = document.getElementById('downloadSticker');

    // preload sticker images
    const totalStickers = 10;
    const stickerFiles = Array.from({length:totalStickers}, (_,i)=>`St-${i+1}.png`);
    stickerFiles.forEach(s=>{const im=new Image();im.src=s});

    // shuffle questions
    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}};
    shuffle(questions);

    function showQuestion(){
      if(qIndex>=questions.length){endGame();return}
      const cur = questions[qIndex];
      qEl.textContent = cur.q;
      qnumEl.textContent = qIndex+1;
      optsEl.innerHTML='';
      cur.options.forEach((o,i)=>{
        const d=document.createElement('div');d.className='opt';d.innerHTML=o;d.dataset.idx=i;d.addEventListener('click',()=>selectOption(d,i));optsEl.appendChild(d);
      });
      nextBtn.style.display='none';
      hintText.textContent = hintBtn.disabled? 'Locked' : 'Hint available';
      updateProgress();
    }

    function selectOption(el, idx){
      const cur = questions[qIndex];
      // disable further clicking
      Array.from(optsEl.children).forEach(x=>x.style.pointerEvents='none');
      if(idx===cur.a){
        el.classList.add('correct');
        score += 10;
        correctCount++;
        streak++;
        qIndex++;
        // after answering correctly, enable hint if streak >=4
        if(streak>=4){hintBtn.disabled=false;hintStatus.textContent='Unlocked! Use the hint button.';hintText.textContent='Hint available';}
        // award sticker every 10 correct
        if(correctCount%10===0){awardSticker(correctCount/10)}
        nextBtn.style.display='inline-block';
      } else {
        el.classList.add('wrong');
        score -= 5;
        // reveal correct
        Array.from(optsEl.children).forEach(x=>{if(parseInt(x.dataset.idx)===cur.a) x.classList.add('correct'); x.style.pointerEvents='none'});
        // penalties
        if(stickers>0){removeSticker();}
        streak = 0;
        hintBtn.disabled = true; hintStatus.textContent='Locked — streak broken'; hintText.textContent='Locked';
        qIndex++;
        nextBtn.style.display='inline-block';
      }
      updateHUD();
    }

    nextBtn.addEventListener('click',()=>{showQuestion()});
    skipBtn.addEventListener('click',()=>{score -=2; streak = 0; hintBtn.disabled=true; hintText.textContent='Locked'; hintStatus.textContent='Locked — streak broken'; qIndex++; updateHUD(); showQuestion();});

    function updateHUD(){scoreEl.textContent=score;streakEl.textContent=streak;updateProgress();renderStickers();}
    function updateProgress(){const pct = Math.round(((qIndex)/totalQuestions)*100);progEl.style.width = pct + '%';}

    function awardSticker(number){ if(number<=totalStickers){stickers = Math.min(number, totalStickers); renderStickers(); showPopupSticker(stickers); localStorage.setItem('kuromi_stickers',stickers);} }
    function removeSticker(){ if(stickers>0){stickers--; renderStickers(); flashRemoval(); localStorage.setItem('kuromi_stickers',stickers);} }

    function renderStickers(){stickerArea.innerHTML=''; for(let i=1;i<=stickers;i++){const a=document.createElement('a');a.href=`St-${i}.png`;a.download=`St-${i}.png`;a.className='mini';a.style.display='inline-block';a.style.width='60px';a.style.height='60px';a.style.borderRadius='8px';a.style.overflow='hidden';a.style.boxShadow='0 6px 20px rgba(0,0,0,0.14)'; a.style.backgroundImage=`url('St-${i}.png')`;a.style.backgroundSize='cover';a.style.backgroundPosition='center'; stickerArea.appendChild(a);} if(stickers===0){stickerArea.textContent='No stickers yet — collect after 10 correct!'} }

    function showPopupSticker(i){popupImg.src = `St-${i}.png`; downloadSticker.href = `St-${i}.png`; popup.classList.add('show'); setTimeout(()=>{popup.classList.remove('show')},2600)}
    function flashRemoval(){ // small visual cue when sticker lost
      stickerArea.style.opacity=0.4; setTimeout(()=>{stickerArea.style.opacity=1},700);
    }

    hintBtn.addEventListener('click',()=>{if(hintBtn.disabled) return; const cur=questions[qIndex]; hintText.textContent = cur.hint || 'No hint available'; score -= 1; // small cost for hint
      updateHUD();});

    function endGame(){
      qEl.textContent = 'Experiment complete!'; optsEl.innerHTML = `<div style="grid-column:1/-1;text-align:center">Final score: <strong>${score}</strong><br/>Stickers collected: ${stickers}/10</div>`;
      nextBtn.style.display='none'; skipBtn.style.display='none'; hintBtn.disabled=true;
    }

    // start game handler
    document.getElementById('startGame').addEventListener('click',()=>{
      document.getElementById('startOverlay').style.display='none';
      // restore state if exists
      const saved = localStorage.getItem('kuromi_stickers'); if(saved) stickers = parseInt(saved)||0; renderStickers(); showQuestion(); updateHUD();
    });

    // initialize UI
    renderStickers(); updateHUD();

    // add keyboard shortcuts for accessibility
    document.addEventListener('keydown', (e)=>{
      if(e.key==='1' || e.key==='2' || e.key==='3' || e.key==='4'){
        const idx = parseInt(e.key)-1; const opt = optsEl.children[idx]; if(opt) opt.click();
      }
      if(e.key==='h'){ hintBtn.click(); }
      if(e.key==='n'){ nextBtn.click(); }
    });

    // small helper: allow downloading currently shown sticker from popup link
    downloadSticker.addEventListener('click', ()=>{ /* anchor handles download */ });

    // ensure first question content ready on overlay close; nothing else until start
  </script>
</body>
</html>
